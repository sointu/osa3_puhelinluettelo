{"version":3,"sources":["services/Numbers.js","components/Personform.js","components/Filter.js","components/Persons.js","components/Notification.js","components/NotificationError.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Person","props","onSubmit","addName","required","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","search","handleSearch","Persons","rows","Notification","message","style","color","fontStyle","fontSize","borderStyle","borderRadius","padding","marginBottom","NotificationError","App","useState","persons","setPersons","personsSearched","setPersonsSearched","setNewName","setNewNumber","setSearch","infoMessage","setInfoMessage","errorMessage","setErrorMessage","useEffect","numberService","initialPersons","names","map","a","name","toLowerCase","found","includes","event","filteredNames","filter","element","target","Personform","preventDefault","window","confirm","person","find","p","changedPerson","number","returnedPerson","console","log","setTimeout","catch","error","concat","obj","arr","Object","keys","forEach","key","index","push","onClick","n","result","deleteP","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.60b4503d.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    update,\r\n    deletePerson\r\n}\r\n\r\n","import React from 'react'\r\n\r\nconst Person = (props) => {\r\n return (\r\n     <>\r\n    <h2>Add a new person</h2>\r\n    <form onSubmit={props.addName}>\r\n      <div>\r\n        name: <input required\r\n          value={props.newName}\r\n          onChange={props.handleNameChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        number: <input required\r\n          value={props.newNumber}\r\n          onChange={props.handleNumberChange}\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n    </>\r\n )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <>\r\n        Filter shown with: <input\r\n        value={props.search}\r\n        onChange={props.handleSearch}\r\n      />\r\n      </>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\n\r\nconst Persons = (props) => {\r\n    \r\n        return(\r\n            <div>\r\n                {props.rows()}        \r\n          </div>\r\n        )        \r\n    \r\n\r\n        \r\n    \r\n    \r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\n\r\nconst Notification = ({message}) => {\r\n\r\n    const infoStyle = {\r\n        color: 'green',\r\n        fontStyle: 'bold',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 3,\r\n        padding: 7,\r\n        marginBottom: 10\r\n    }\r\n    \r\n\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    \r\n        return (\r\n            <div style={infoStyle}>\r\n                {message}\r\n            </div>\r\n        )\r\n    \r\n    }\r\n   \r\n\r\nexport default Notification","import React from 'react'\r\n\r\n\r\nconst NotificationError = ({message}) => {\r\n\r\n    const errorStyle = {\r\n        color: 'red',\r\n        fontStyle: 'bold',\r\n        fontSize: 20,\r\n        borderStyle: 'solid',\r\n        borderRadius: 3,\r\n        padding: 7,\r\n        marginBottom: 10\r\n    }\r\n    \r\n\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    \r\n        return (\r\n            <div style={errorStyle}>\r\n                {message}\r\n            </div>\r\n        )\r\n    \r\n    }\r\n   \r\n\r\nexport default NotificationError","import React, { useState, useEffect } from 'react'\n//import axios from 'axios'\nimport numberService from './services/Numbers'\nimport Personform from './components/Personform'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport NotificationError from './components/NotificationError'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [personsSearched, setPersonsSearched] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [infoMessage, setInfoMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n\n  useEffect(() => {\n    numberService\n      .getAll()\n      .then(initialPersons =>\n        setPersons(initialPersons))\n  }, [])\n\n  let names = persons.map(a => ((a.name).toLowerCase()))\n  //console.log(names)\n\n  let names2 = persons.map(a => (a.name))\n  let found = names2.includes(newName)\n\n  //console.log(found)\n  \n\n  const addName = (event) => {\n    event.preventDefault()\n    let bool = false\n    if (found) {\n      bool = window.confirm(`${newName} is already added in the phonebook, do you want to change the number?`)\n      if (bool) {\n        const person = persons.find(p => p.name === newName)\n        const changedPerson = { ...person, number: newNumber }\n\n        numberService\n          .update(person.id, changedPerson)\n          .then(returnedPerson => {\n            console.log(returnedPerson)\n            setPersons(persons.map(person => person.name !== newName ? person : returnedPerson))\n            setInfoMessage(\n              `${newName}'s number was changed to ${newNumber}.`\n            )\n            setTimeout(() => {\n              setInfoMessage(null)\n            }, 5000)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setErrorMessage(\n              `the person '${person.name}' was already deleted from server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n\n    } else {\n      \n      const nameObject = {\n        name: newName,\n        number: newNumber\n      }\n      numberService\n        .create(nameObject)\n        .then(returnedPerson => {\n          console.log(returnedPerson)\n          setPersons(persons.concat(returnedPerson))\n          setInfoMessage(\n            `${newName} was added.`\n          )\n          setTimeout(() => {\n            setInfoMessage(null)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          if (error.response) {\n            console.log(error.response.data)\n            let obj = error.response.data\n            let arr = []\n            Object.keys(obj).forEach((key, index)=>{\n              arr.push(obj[key])\n              console.log(arr)\n            })\n            \n            setInfoMessage(\n              `${arr[0]}`\n            )\n            setTimeout(() => {\n              setInfoMessage(null)\n            }, 5000)\n          }\n        })\n    }\n  }\n\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n    //console.log(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n    let filteredNames = names.filter(element => element.includes((event.target.value).toLowerCase()))\n   // console.log(filteredNames)\n    setPersonsSearched(persons.filter((a) => filteredNames.includes((a.name).toLowerCase())))\n    setSearch(event.target.value)\n  }\n\n  const deleteP = id => {\n    const person = persons.find(n => n.id === id)\n    console.log(person)\n    let result = window.confirm(`Delete ${person.name}?`)\n    console.log(result)\n    if (result) {\n      numberService\n        .deletePerson(id)\n        .then(() => {\n          setPersons(persons.map(person => person))\n          setPersonsSearched(personsSearched.map(person => person))\n          setInfoMessage(\n            `${person.name} was removed.`\n          )\n          setTimeout(() => {\n            setInfoMessage(null)\n          }, 5000)\n        })\n        .catch(error => {\n          //alert(`the person '${person.name}' was already deleted from server`)\n          setErrorMessage(\n            `the person '${person.name}' was already deleted from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setPersons(persons.filter(p => p.id !== id))\n        })\n    }\n  }\n\n  const rows = () => {\n   // console.log(personsSearched)\n    return personsSearched.map(person =>\n      <p key={person.id}>\n        {person.name} {person.number}\n        <button onClick={() => deleteP(person.id)}>Delete</button>\n      </p>\n    )\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={infoMessage}\n      />\n      <NotificationError\n        message={errorMessage}\n      />\n\n      <Filter\n        search={search}\n        handleSearch={handleSearch}\n      />\n\n      <Personform\n        addName={addName}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons\n        rows={rows}\n      />\n    </div>\n  )\n\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n"],"sourceRoot":""}